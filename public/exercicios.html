<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>ExercÃ­cios â€” FitApp</title>
  <link rel="stylesheet" href="./style.css">
</head>
<body class="min-h-screen pb-24 bg-zinc-950 text-white">

  <main class="p-5 max-w-md mx-auto">
    <header class="flex items-center justify-between mb-4">
      <h1 class="text-2xl font-bold">Biblioteca de ExercÃ­cios</h1>
      <input id="search" class="bg-zinc-900 rounded px-3 py-1 text-sm" placeholder="Buscar...">
    </header>

    <div id="list" class="space-y-3"></div>
  </main>

<!-- menu -->
  <nav class="fixed bottom-0 left-0 w-full bg-zinc-900 border-t border-zinc-800">
    <ul class="flex justify-around py-3 text-zinc-400">
      <li class="flex flex-col items-center">
        <a href="./index.html" class="flex flex-col items-center">
          <span class="text-xl">ğŸ </span>
          <span class="text-xs mt-1">Home</span>
        </a>
      </li>
      <li class="flex flex-col items-center">
        <a href="./treino.html" class="flex flex-col items-center text-white">
          <span class="text-xl">ğŸ”¥</span>
          <span class="text-xs mt-1">Treinos</span>
        </a>
      </li>
      <li class="flex flex-col items-center">
        <a href="./exercicios.html" class="flex flex-col items-center">
          <span class="text-xl">ğŸ’ª</span>
          <span class="text-xs mt-1">ExercÃ­cios</span>
        </a>
      </li>
      <li class="flex flex-col items-center">
        <a href="./perfil.html" class="flex flex-col items-center">
          <span class="text-xl">ğŸ‘¤</span>
          <span class="text-xs mt-1">Perfil</span>
        </a>
      </li>
    </ul>
  </nav>

  <!-- Modal de ExercÃ­cio -->
  <div id="exerciseModal" class="fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center hidden">
    <div class="bg-zinc-900 max-w-md w-full mx-4 p-5 rounded-2xl border border-zinc-800">
      
      <h2 id="modalTitle" class="text-2xl font-bold mb-3"></h2>

      <video id="modalVideo" autoplay loop muted playsinline class="w-full rounded-xl mb-3">
        <source id="modalSource" src="" type="video/mp4">
      </video>

      <p id="modalDesc" class="text-zinc-300 text-sm leading-relaxed"></p>

      <button id="closeModal"
        class="mt-5 w-full py-2 bg-zinc-800 rounded-xl text-zinc-300 hover:bg-zinc-700 transition">
        Fechar
      </button>

    </div>
  </div>

 <script type="module">
  const dataPath = './data/treinos.json';

  // DADOS DAS ANIMAÃ‡Ã•ES + DESCRIÃ‡Ã•ES
  const extraInfo = {
    "Remada alta": {
      video: "/videos/remada-alta.mp4",
      desc: "Excelente para trapÃ©zio, deltoides e parte superior das costas. Ajuda muito na postura e forÃ§a de puxada."
    },
    "ElevaÃ§Ã£o frontal": {
      video: "/videos/elevacao-frontal.mp4",
      desc: "Foca no deltoide anterior, ideal para deixar o ombro mais arredondado e definido."
    },
    "ElevaÃ§Ã£o lateral": {
      video: "/videos/elevacao-lateral.mp4",
      desc: "Trabalha o deltoide lateral, perfeito para aumentar a largura do ombro e dar o shape em V."
    },
    "Desenvolvimento com halteres": {
      video: "/videos/desenvolvimentoH.mp4",
      desc: "ExercÃ­cio composto que ativa toda musculatura do ombro. Aumenta forÃ§a, estabilidade e volume."
    },
    "SumÃ´": {
      video: "/videos/sumo.mp4",
      desc: "Ativa glÃºteos, posterior, quadrÃ­ceps e adutores. Ã“timo para fortalecer e melhorar estabilidade."
    }
  };

  async function loadExercises() {
    const res = await fetch(dataPath);
    const json = await res.json();
    const list = document.getElementById('list');
    const all = Object.values(json.treinos).flatMap(t => t.exercicios);

    function render(filter='') {
      list.innerHTML = '';

      const filtered = all.filter(e => e.nome.toLowerCase().includes(filter.toLowerCase()));

      filtered.forEach(ex => {
        const div = document.createElement('div');
        div.className = 'bg-zinc-900 p-4 rounded-xl border border-zinc-800 cursor-pointer hover:border-zinc-700 transition';

        div.innerHTML = `
          <div class="flex justify-between">
            <div>
              <div class="font-bold">${ex.nome}</div>
              <div class="text-zinc-400 text-sm">${ex.series} x ${ex.reps}</div>
            </div>
            <div class="text-zinc-400 text-sm">â–¶</div>
          </div>
        `;

        // Abre o modal ao clicar
        div.addEventListener('click', () => openModal(ex.nome));

        list.appendChild(div);
      });
    }

    // BUSCA
    document.getElementById('search').addEventListener('input', e => render(e.target.value));

    render();
  }

  // ===== MODAL =====
  const modal = document.getElementById("exerciseModal");
  const modalTitle = document.getElementById("modalTitle");
  const modalVideo = document.getElementById("modalVideo");
  const modalSource = document.getElementById("modalSource");
  const modalDesc = document.getElementById("modalDesc");

  function openModal(name) {
    const info = extraInfo[name];
    
    modalTitle.textContent = name;
    modalSource.src = info?.video || "";
    modalVideo.load();
    modalDesc.textContent = info?.desc || "Sem descriÃ§Ã£o disponÃ­vel.";

    modal.classList.remove("hidden");
  }

  document.getElementById("closeModal").onclick = () => {
    modal.classList.add("hidden");
    modalVideo.pause();
  };

  loadExercises();
</script>

</body>
</html>